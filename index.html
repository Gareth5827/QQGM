<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manufactured World</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #111;
            color: #fff;
            position: relative;
            overflow: hidden;
        }
        
        .text-box {
            width: 80%;
            max-width: 800px;
            height: 60vh;
            padding: 20px;
            border: 2px solid #444;
            border-radius: 5px;
            background-color: #222;
            overflow-y: auto;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .input-field {
            width: 80%;
            max-width: 800px;
            padding: 10px;
            font-size: 16px;
            background-color: #333;
            color: #fff;
            border: 1px solid #444;
            border-radius: 5px;
        }
        
        b {
            color: #4fc3f7;
            font-weight: bold;
        }
        
        i {
            color: #81c784;
            font-style: italic;
        }
        
        .tp-counter {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #333;
            padding: 10px 15px;
            border-radius: 5px;
            border: 1px solid #444;
        }
    </style>
</head>
<body>
    <div class="tp-counter" id="tpCounter">TP: 5</div>
    <div class="text-box" id="textBox"></div>
    <input type="text" class="input-field" id="inputField" placeholder="Type your response...">

    <script>
        // Game pages
        const pages = [
            {
                content: `Welcome to the (Manufactured) World.
You were born into a life already planned, you are a cog in a machine too massive and protected to stop. Towering above the dead Earth are the [Manufactured] Towns, massive hunks of metal and concrete grids suspended in the sky, each one feels less like a town and more of an inescapable prison. The rich live above these towns in lavish fortresses you'll never get inside of. As you've been told since birth, you are there to serve the rich and nothing else. Everyone is assigned a job by the (TaskMaster), a glowing slab embedded in everyone's living quarters. You are expected to wait inside until the TaskMaster tells you what to do. You cannot say no to the TaskMaster, unless you want the rich to dispose of you. Inside of everyone's houses is a gas valve, when activated it sprays a deadly neurotoxin that kills whoever inhales it in seconds. It even rots living matter, so cleanup of defectors is easier. Refusing to do the assigned job, being late to the job, or failing the assigned job will make you a defector. The TaskMaster will lock your door, fill the room with gas, and the city forgets you. Before and after each job you have free time, but you know that these cold curated hours are nothing more than an illusion of freedom.

The job you have been given for the past few years of your lives is a (Hunter). One of the most dangerous jobs in the system. While everyone else washes buildings, ensures programs are working correctly, or makes music to entertain the rich, your job is to descend onto the shattered remnants of the world you live on, referred to as [The Below], and retrieve whatever the TaskMaster tells you. The Below is plagued with rabid evolution and unnatural creations. The rich have played god for many years, conducting experiments without ethics, logic, or restraint. While ecosystems have mutated so much they are almost indistinguishable from what they used to be a year ago. Despite the massive danger, this is the only place where the machine can't watch or monitor you, this hostile wasteland is the only place you can breathe and see the humongous mansions the rich have built.

You've been born into a hostile world where stepping out of line is the difference between life and death. There's no second chances, no saying no. Don't come back empty handed.

Type "Next" to continue`,
                nextInput: "next"
            },
            {
                content: `As you reminisce of what the world around you is like and what your life has been like, you wake up from your [dream] with the same stale tone you've woken up to for many years prior. The TaskMaster awakes, turning on the stale florescent lighting in your living quarters. The small greyscale plastic and metal room lights up and you jump to your feet, getting in front the TaskMaster as soon as you can. You know what would happen if you didn't.

The TaskMasters screen is blank for a few moments, but after some silence, your job is displayed.
Objective(s): Descend into the wildgrass region, eliminate toxin beetle infestation
Target(s): Elder toxin beetles
Condition(s): Do not kill any egg sacks or larvae

The text lingers for a few moments before disappearing all at once. It plays a soft and hollow jingle before displaying a large 3 hour timer. It begins ticking down and your mounted map of the city highlights the drop point you need to get to before break time is over.

The TaskMaster says "Compliance window is now active. Please optimize your systems. Rest, hydrate, and refuel." and the room returns to stillness. (PLAYERS HAVE 5 TP! If they do not reach the drop point when TP hits 0, they will be killed.)`,
                options: [
                    { input: "next", goto: 3 },
                    { input: "search", goto: 2 },
                    { input: "look around", goto: 2 }
                ]
            },
            {
                content: "Looking around the room: You peer around your room, looking at the little belongings you have.

Behind you are the sterile plastic bunk beds with leather straps.
In front of you is the TaskMaster terminal.
To the left is your pulsing city map. (drop point is pulsing)
And to the right are your lockers and utility bins. This is as close to a room as you get, each locker can only hold a couple small items, and in front of the lockers is your bin of work gear.",
                nextInput: "Next"
            },
            {
                content: "Players have a choice:
Head to public feeding areas (eat and grab food before leaving) -2 TP
Head to equipment store (can buy stuff) -1 TP
Head to music store (can listen to AI music, grants a buff on your next adventure) -1 TP
Isolation meditation cells (can upgrade abilities) {can upgrade an ability you have for -1 TP for +1, -2 for +2, etc}
Advanced teaching centre (can learn new abilities)

As you leave your living quarters, the clock ticks down. You have a very small amount of freedom, but freedom nontheless.
You can head to the public feeding areas to get food for your day, the equipment store for items, the music store for buffs, the teaching centre for new abilities, and the meditation pods for ability upgrades.",
                options: [
                    { input: "feeding", goto: 4 },
                    { input: "food", goto: 4 },
                    { input: "public feeding areas", goto: 4 },
                    { input: "feeding areas", goto: 4 },
                    { input: "tools", goto: 5 },
                    { input: "equipment", goto: 5 },
                    { input: "equipment store", goto: 5 },
                    { input: "tunes", goto: 6 },
                    { input: "music store", goto: 6 },
                    { input: "music", goto: 6 },
                    { input: "meditation", goto: 7 },
                    { input: "meditation cells", goto: 7 },
                    { input: "isolation cells", goto: 7 },
                    { input: "isolation meditation cells", goto: 7 },
                    { input: "teaching", goto: 8 },
                    { input: "advanced teaching", goto: 8 },
                    { input: "advanced teaching centre", goto: 8 },
                    { input: "advanced teaching center", goto: 8 },
                    { input: "teaching centre", goto: 8 },
                    { input: "teaching center", goto: 8 },
                ]
            }
            {
            content: `You head over to the public feeding areas, following the streams of people doing the exact same thing. The only thing you can hear is a symphony of synchronized footsteps and the occasional sniff. A voice comes over the PA system on the street "Optimal nourishment window now open. Dining Venue 13 is almost full, members of Blocks R through Z proceed to Dining Venue 14. Remember, nutrition is privilege."
    
            As you're walking along with the crowd of people, you see a wide metallic arch looming over you, and that can only mean one thing. Dining Venue 13. You head through the arch and enter the revolving doors. As you move around the large circular area, the door suddenly stops. After a moment of silence a BEEP is heard and a green light turns on. The door continues to move, letting you into the uninspiring and bland Dining Venue 13.
            
            Rows of copy and paste benches and tables stretch like military lines. Everything from the floor, tables, and treys is a dull shade of off-white, the only colour is in the food wall at the opposite end of the room, being a nice stainless steel grey. The food wall stretches across the entirety of the west wall, softly humming with energy and is covered with hundreds of letter-number compartments. Everything from A1 to Z26. As far as you can tell, it works like a mail sorter mixed with a vending machine. Each cell is sealed behind a black flap and as you move down the line of people, you come face to face with a board looking attendant, a young man with tired eyes and a clipboard, sounding just as robotic as the machines you're around every day. "Name?" he asks. (everyone in the party says their name)
            (one line for each party member, or make up your own)
            "B12, next."
            "R19, next."
            "G6, next."
            "U22, next."
            "D20, next." - if a player rolls a D20 they get healed 1 health
            
            As each person approaches the wall, the flaps open up and gently push a food try towards the end. Each trey and its contents look identical. Dull nutrient paste, two dense blobs marketed as buns, a hydration cube, and a vanilla stick. As you pull the trey out, the coils behind the flap spiral, pushing the next meal forward. After grabbing your sad excuse for food, you make your way to your table along with everyone else who you've come to call your neighbours. No one talks as there aren't any explicit rules saying it's ok to do so. The only thing you can hear is the deafening silence and the mostly synchronized crunches of food. Looking down at your trey all of you find an identical note that reads
            "GOOD LUCK HUNTERS, YOUR PERFORMANCE IS VERY MEANINFUL TO THIS ECOSYSTEM. Signed industrial entertainment committee"
            As well as an identical supply of food and nutrition capsules for your journey. Everyone roll 1D8 to see what pills you get.
            1- (pill box 1) VB pill x2, Syn pill x2
            2- (pill box 2) B-mine pill x3, VB pill x1
            3- (pill box 3) Unil pill x2, B-Mine pill x1, Syn pill x1
            4- (Pill box 4) Syn pill x3, B-Mine pill x1
            5- (pill box 5) All pills x1
            6- (pill box 6) B-Mine pill x2, Unil pill x2
            7- (pill box 7) VB pill x2, B-Mine pill x2
            8- (pill box 8) VB pill x3, Unil pill x1`,
                        nextInput: "next", goto: 3
            },
            {
            content: `You make your way over to Block 12, Equipment Support & Disposal. -1 TP

            Upon opening the doors, the smell of rust, burnt rubber, and sanitizer assaults your nose. The only thing making noise are the fluorescent lights buzzing. As you stroll through the isles looking at all the different tools that are available, you see the front desk. A lanky man with a white bearded tucked into his collar. He looks at you with a blank expression, then says "Nothing is for sale right now, the machine didn't specify what needed to go. You can grab something from there though" pointing to a large machine with a scanner on the front.
                        Items: upon using the scanner, the player rolls 1D10
            1: Mini flare [Light] [30 FT] - Target a 10 × 10 FT area, anything inside has Blind 2 until the end of their turn on a failed END save [0 TP]
            2: Hooked rope [Attack] [25 FT] - Pull something towards you, if it is a unit, they make an optional PWR save, on fail or on no save it is pulled towards you [0 TP]
            3: Med kit [10 FT] - Heal a target for 5 Health and remove Bleeding [0 TP]
            4: Sound canister - Emits an ear piercing sound in a 30 FT range around you, anything that isn’t braced for the sound and is in a 10 FT range makes an INS save, any that fail are Shaken and anything targeting them has a +2 to Hit until the start of their next turn [0 TP]
            5: Protein patch - [10 FT] Gives target +2 to Hit on all [Attack] rolls and +1 to PWR saves until the end of their next turn [0 TP]
            6: Wheat blanket - Can be worn to gain +1 to all AGI rolls until the end of your next turn, or lit on fire to create Fire for 2 turns [0 TP]
            7: Air dry paste [10 FT] - Can be put onto something to create a hard plastic like substance until it is destroyed [0 TP] {When applying it to a unit, that unit has Bleeding stopped until the shield is destroyed and gains a 4 Health shield until it’s destroyed, can be put on terrain to give an 8 Health shield until destroyed}
            8: Bolt buzzer [30 FT] - Can be thrown to apply Shaken a unit and deal 3 damage [0 TP]
            9: Smoke baton - Create Smoke within a 10 FT area around you [0 TP]
            10: Crawler bait [30 FT] - Target an empty space, the all insects in a 5 FT range make an INS save of 13+, any that fail are Shaken and look at the bait [0 TP]
            Type "scan" to use the scanner${scannerUses >= 2 ? " (costs 1 TP)" : ""} or "leave" to exit.`,
                        options: [
                            { input: "scan", action: "useScanner" },
                            { input: "leave", goto: 3 } // Return to location selection
                        ]
            }
        
            ];
        ];

        // Game state
        let currentPage = 0;
        let tp = 5;
        let scannerUses = 0;
        const textBox = document.getElementById('textBox');
        const inputField = document.getElementById('inputField');
        const tpCounter = document.getElementById('tpCounter');

        // Format text with () for bold and [] for italics
        function formatText(text) {
            text = text.replace(/\((.*?)\)/g, '<b>$1</b>');
            text = text.replace(/\[(.*?)\]/g, '<i>$1</i>');
            text = text.replace(/\n/g, '<br>');
            return text;
        }

        // Update TP counter display
        function updateTP() {
            tpCounter.textContent = `TP: ${tp}`;
        }

        // Load current page
        function loadPage() {
            if (currentPage < pages.length) {
                textBox.innerHTML = formatText(pages[currentPage].content);
                inputField.value = '';
                inputField.focus();
                updateTP();
            }
        }

        // Handle scanner use
        function useScanner() {
        if (scannerUses >= 2) {
            // Check if player has enough TP for additional scans
            if (tp <= 0) {
                textBox.innerHTML = formatText("You don't have enough TP to use the scanner again!");
                return;
            }
            tp -= 1;
            updateTP();
        }

        scannerUses++;
        let result = "";

        if (scannerUses === 1) {
            // First use - automatic success
            const roll = Math.floor(Math.random() * 10) + 1;
            result = `You stick your face in the scanner and the machine flashes green, roll 1D10 for an item!\n\nYou got: ${scannerItems[roll-1]}`;
        } 
        else if (scannerUses === 2) {
            // Second use - ALL roll needed
            const allRoll = Math.floor(Math.random() * 10) + 1; // Simulating 1D10 roll
            if (allRoll >= 5) {
                const itemRoll = Math.floor(Math.random() * 10) + 1;
                result = `You stick your face in the scanner, make an ALL roll now!\n\nYou rolled ${allRoll} (needed 5+)\nThe machine flashes green, roll 1D10 for an item!\n\nYou got: ${scannerItems[itemRoll-1]}`;
            } else {
                result = `You stick your face in the scanner, make an ALL roll now!\n\nYou rolled ${allRoll} (needed 5+)\nThe machine flashes red, no items for now.`;
            }
        } 
        else {
            // Subsequent uses - harder ALL roll
            const allRoll = Math.floor(Math.random() * 10) + 1; // Simulating 1D10 roll
            if (allRoll >= 10) {
                const itemRoll = Math.floor(Math.random() * 10) + 1;
                result = `You stick your face in the scanner, make an ALL roll now!\n\nYou rolled ${allRoll} (needed 10+)\nThe machine flashes green, roll 1D10 for an item!\n\nYou got: ${scannerItems[itemRoll-1]}`;
            } else {
                result = `You stick your face in the scanner, make an ALL roll now!\n\nYou rolled ${allRoll} (needed 10+)\nThe machine flashes red, no items for now.`;
            }
        }

        // Handle input
    inputField.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            const input = this.value.trim().toLowerCase();
            
            // Page 0 has simple next input
            if (currentPage === 0 && input === 'next') {
                currentPage = 1;
                loadPage();
            }
            // Page 1 has multiple options
            else if (currentPage === 1) {
                const page = pages[1];
                for (const option of page.options) {
                    if (input === option.input.toLowerCase()) {
                        // Subtract TP based on the option chosen
                        if (option.goto === 4) { // Feeding areas
                            tp -= 2;
                            if (tp < 0) tp = 0;
                            updateTP();
                            
                            // Check if TP reached 0
                            if (tp <= 0) {
                                textBox.innerHTML = formatText("You ran out of TP! The TaskMaster detects your non-compliance and activates the gas valve. Everything fades to black...");
                                inputField.disabled = true;
                                return;
                            }
                        }
                        else if (option.goto === 5 || option.goto === 6) { // Equipment or music store
                            tp -= 1;
                            if (tp < 0) tp = 0;
                            updateTP();
                            
                            if (tp <= 0) {
                                textBox.innerHTML = formatText("You ran out of TP! The TaskMaster detects your non-compliance and activates the gas valve. Everything fades to black...");
                                inputField.disabled = true;
                                return;
                            }
                        }
                        
                        currentPage = option.goto;
                        loadPage();
                        return;
                    }
                }
                // If no valid option was entered
                alert('Invalid command. Try "Next", "Search", or "Look around"');
            }
            // Handle other pages as needed
            else if (currentPage === 4 && input === 'next') {
                currentPage = /* next page number after feeding */;
                loadPage();
            }
        }
    });

        // Initialize
        loadPage();
    </script>
</body>
</html>
