<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manufactured World</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #111;
            color: #fff;
            position: relative;
            overflow: hidden;
        }
        
        .text-box {
            width: 80%;
            max-width: 800px;
            height: 60vh;
            padding: 20px;
            border: 2px solid #444;
            border-radius: 5px;
            background-color: #222;
            overflow-y: auto;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .input-field {
            width: 80%;
            max-width: 800px;
            padding: 10px;
            font-size: 16px;
            background-color: #333;
            color: #fff;
            border: 1px solid #444;
            border-radius: 5px;
        }
        
        b {
            color: #4fc3f7;
            font-weight: bold;
        }
        
        i {
            color: #81c784;
            font-style: italic;
        }
        
        .tp-counter {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #333;
            padding: 10px 15px;
            border-radius: 5px;
            border: 1px solid #444;
        }
    </style>
</head>
<body>
    <div class="tp-counter" id="tpCounter">TP: 5</div>
    <div class="text-box" id="textBox"></div>
    <input type="text" class="input-field" id="inputField" placeholder="Type your response...">

    <script>
        // Game pages
        const pages = [
            {
                content: `Welcome to the (Manufactured) World.
You were born into a life already planned, you are a cog in a machine too massive and protected to stop. Towering above the dead Earth are the [Manufactured] Towns, massive hunks of metal and concrete grids suspended in the sky, each one feels less like a town and more of an inescapable prison. The rich live above these towns in lavish fortresses you'll never get inside of. As you've been told since birth, you are there to serve the rich and nothing else. Everyone is assigned a job by the (TaskMaster), a glowing slab embedded in everyone's living quarters. You are expected to wait inside until the TaskMaster tells you what to do. You cannot say no to the TaskMaster, unless you want the rich to dispose of you. Inside of everyone's houses is a gas valve, when activated it sprays a deadly neurotoxin that kills whoever inhales it in seconds. It even rots living matter, so cleanup of defectors is easier. Refusing to do the assigned job, being late to the job, or failing the assigned job will make you a defector. The TaskMaster will lock your door, fill the room with gas, and the city forgets you. Before and after each job you have free time, but you know that these cold curated hours are nothing more than an illusion of freedom.

The job you have been given for the past few years of your lives is a (Hunter). One of the most dangerous jobs in the system. While everyone else washes buildings, ensures programs are working correctly, or makes music to entertain the rich, your job is to descend onto the shattered remnants of the world you live on, referred to as [The Below], and retrieve whatever the TaskMaster tells you. The Below is plagued with rabid evolution and unnatural creations. The rich have played god for many years, conducting experiments without ethics, logic, or restraint. While ecosystems have mutated so much they are almost indistinguishable from what they used to be a year ago. Despite the massive danger, this is the only place where the machine can't watch or monitor you, this hostile wasteland is the only place you can breathe and see the humongous mansions the rich have built.

You've been born into a hostile world where stepping out of line is the difference between life and death. There's no second chances, no saying no. Don't come back empty handed.

Type "Next" to continue`,
                nextInput: "next"
            },
            {
                content: `As you reminisce of what the world around you is like and what your life has been like, you wake up from your [dream] with the same stale tone you've woken up to for many years prior. The TaskMaster awakes, turning on the stale florescent lighting in your living quarters. The small greyscale plastic and metal room lights up and you jump to your feet, getting in front the TaskMaster as soon as you can. You know what would happen if you didn't.

The TaskMasters screen is blank for a few moments, but after some silence, your job is displayed.
Objective(s): Descend into the wildgrass region, eliminate toxin beetle infestation
Target(s): Elder toxin beetles
Condition(s): Do not kill any egg sacks or larvae

The text lingers for a few moments before disappearing all at once. It plays a soft and hollow jingle before displaying a large 3 hour timer. It begins ticking down and your mounted map of the city highlights the drop point you need to get to before break time is over.

The TaskMaster says "Compliance window is now active. Please optimize your systems. Rest, hydrate, and refuel." and the room returns to stillness. (PLAYERS HAVE 5 TP! If they do not reach the drop point when TP hits 0, they will be killed.)`,
                options: [
                    { input: "next", goto: 3 },
                    { input: "search", goto: 2 },
                    { input: "look around", goto: 2 }
                ]
            },
            {
                content: "Looking around the room: You peer around your room, looking at the little belongings you have.

Behind you are the sterile plastic bunk beds with leather straps.
In front of you is the TaskMaster terminal.
To the left is your pulsing city map. (drop point is pulsing)
And to the right are your lockers and utility bins. This is as close to a room as you get, each locker can only hold a couple small items, and in front of the lockers is your bin of work gear.",
                nextInput: "Next"
            },
            {
                content: "Players have a choice:
Head to public feeding areas (eat and grab food before leaving) -2 TP
Head to equipment store (can buy stuff) -1 TP
Head to music store (can listen to AI music, grants a buff on your next adventure) -1 TP
Isolation meditation cells (can upgrade abilities) {can upgrade an ability you have for -1 TP for +1, -2 for +2, etc}
Advanced teaching centre (can learn new abilities)

As you leave your living quarters, the clock ticks down. You have a very small amount of freedom, but freedom nontheless.
You can head to the public feeding areas to get food for your day, the equipment store for items, the music store for buffs, the teaching centre for new abilities, and the meditation pods for ability upgrades.",
                options: [
                    { input: "feeding", goto: 4 },
                    { input: "food", goto: 4 },
                    { input: "public feeding areas", goto: 4 },
                    { input: "feeding areas", goto: 4 },
                    { input: "tools", goto: 5 },
                    { input: "equipment", goto: 5 },
                    { input: "equipment store", goto: 5 },
                    { input: "tunes", goto: 6 },
                    { input: "music store", goto: 6 },
                    { input: "music", goto: 6 },
                    { input: "meditation", goto: 7 },
                    { input: "meditation cells", goto: 7 },
                    { input: "isolation cells", goto: 7 },
                    { input: "isolation meditation cells", goto: 7 },
                    { input: "teaching", goto: 8 },
                    { input: "advanced teaching", goto: 8 },
                    { input: "advanced teaching centre", goto: 8 },
                    { input: "advanced teaching center", goto: 8 },
                    { input: "teaching centre", goto: 8 },
                    { input: "teaching center", goto: 8 },
                ]
            }
        ];

        // Game state
        let currentPage = 0;
        let tp = 5;
        const textBox = document.getElementById('textBox');
        const inputField = document.getElementById('inputField');
        const tpCounter = document.getElementById('tpCounter');

        // Format text with () for bold and [] for italics
        function formatText(text) {
            text = text.replace(/\((.*?)\)/g, '<b>$1</b>');
            text = text.replace(/\[(.*?)\]/g, '<i>$1</i>');
            text = text.replace(/\n/g, '<br>');
            return text;
        }

        // Update TP counter display
        function updateTP() {
            tpCounter.textContent = `TP: ${tp}`;
        }

        // Load current page
        function loadPage() {
            if (currentPage < pages.length) {
                textBox.innerHTML = formatText(pages[currentPage].content);
                inputField.value = '';
                inputField.focus();
                updateTP();
            }
        }

        // Handle input
        inputField.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const input = this.value.trim().toLowerCase();
                
                // Page 0 has simple next input
                if (currentPage === 0 && input === 'next') {
                    currentPage = 1;
                    loadPage();
                }
                // Page 1 has multiple options
                else if (currentPage === 1) {
                    const page = pages[1];
                    for (const option of page.options) {
                        if (input === option.input.toLowerCase()) {
                            currentPage = option.goto;
                            loadPage();
                            return;
                        }
                    }
                    // If no valid option was entered
                    alert('Invalid command. Try "Next", "Search", or "Look around"');
                }
                // Handle other pages as needed
            }
        });

        // Initialize
        loadPage();
    </script>
</body>
</html>
